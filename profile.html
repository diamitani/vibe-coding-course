<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile | Vibe Coding Masterclass</title>
    <meta name="description" content="View a vibe coder's public profile, projects, and tools.">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="ambient-bg"></div>
    <nav class="nav">
        <div class="nav-inner"><a href="index.html" class="nav-logo">âš¡ Vibe Coding</a><button class="nav-toggle"
                aria-label="Toggle navigation">â˜°</button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="module1.html">Modules</a></li>
                <li><a href="tools.html">Tools</a></li>
                <li><a href="news.html">News</a></li>
                <li><a href="lab1.html">Labs</a></li><li><a href="prompt-lab.html">Prompt Lab</a></li>
                <li><a href="community.html">Community</a></li>
                <li id="auth-nav-slot"></li>
            </ul>
        </div>
    </nav>

    <main class="page-content">
        <div class="container">
            <div id="profile-content" style="max-width:800px;margin:0 auto;padding:var(--space-2xl) 0;">
                <div class="news-loading">
                    <div class="spinner"></div>
                    <p>Loading profile...</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>âš¡ Vibe Coding Masterclass &copy; 2025</p>
        </div>
    </footer>
    <script src="script.js"></script>
    <script>
        const params = new URLSearchParams(location.search);
        const userId = params.get('id');
        const container = document.getElementById('profile-content');

        if (!userId) {
            container.innerHTML = `<div style="text-align:center;padding:4rem;"><p style="font-size:3rem;margin-bottom:1rem;">ğŸ”</p><h2>No profile specified</h2><p style="color:var(--text-secondary);margin-top:1rem;">Browse the <a href="community.html">community</a> to find vibe coders.</p></div>`;
        } else {
            const user = getUserById(userId);
            if (!user) {
                container.innerHTML = `<div style="text-align:center;padding:4rem;"><p style="font-size:3rem;margin-bottom:1rem;">ğŸ‘»</p><h2>User not found</h2><p style="color:var(--text-secondary);margin-top:1rem;">This profile doesn't exist. Browse the <a href="community.html">community</a> instead.</p></div>`;
            } else {
                const labLabels = { marketing: 'ğŸ¨ Marketing', ecommerce: 'ğŸ›’ E-Commerce', marketplace: 'ğŸª Marketplace', other: 'ğŸŒ Other' };
                const isOwn = getCurrentUser()?.id === user.id;

                container.innerHTML = `
          <!-- Header -->
          <div class="profile-header">
            <div class="avatar-large">${user.avatar || 'ğŸ§‘â€ğŸ’»'}</div>
            <div class="profile-info">
              <h2 style="margin:0;">${esc(user.name)}</h2>
              <span class="vibe-type">${esc(user.vibeType || 'Explorer')}</span>
              ${user.bio ? `<p class="profile-bio">${esc(user.bio)}</p>` : ''}
              ${user.tools?.length ? `<div class="profile-tools">${user.tools.map(t => `<span class="tag">${esc(t)}</span>`).join('')}</div>` : ''}
              <p style="font-size:0.75rem;color:var(--text-muted);margin-top:var(--space-sm);">Member since ${user.joinDate}</p>
            </div>
          </div>

          <!-- Projects -->
          <h2 style="font-size:1.25rem;font-weight:700;margin-bottom:var(--space-lg);">Projects (${(user.projects || []).length})</h2>
          ${(user.projects || []).length === 0
                        ? `<div style="text-align:center;padding:3rem;color:var(--text-muted);background:var(--bg-card);border-radius:var(--radius-lg);border:1px solid var(--border-subtle);"><p style="font-size:2rem;margin-bottom:0.5rem;">ğŸ“‚</p><p>No projects yet</p></div>`
                        : `<div class="projects-list">${(user.projects || []).map(p => `
              <div class="project-card">
                <h4>${esc(p.title)}</h4>
                <div class="project-meta">${labLabels[p.lab] || p.lab} Â· ${esc(p.tool)} Â· ${p.date}</div>
                ${p.desc ? `<div class="project-desc">${esc(p.desc)}</div>` : ''}
                <a href="${esc(p.url)}" target="_blank" rel="noopener" class="btn btn-secondary" style="padding:0.4rem 1rem;font-size:0.8rem;display:inline-flex;">View Project â†’</a>
              </div>`).join('')}</div>`
                    }

          ${isOwn ? `<div style="margin-top:var(--space-xl);"><a href="dashboard.html" class="btn btn-primary">Edit Profile â†’</a></div>` : ''}
        `;
            }
        }

        function esc(str) {
            if (!str) return '';
            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
        }
    </script>
</body>

</html>